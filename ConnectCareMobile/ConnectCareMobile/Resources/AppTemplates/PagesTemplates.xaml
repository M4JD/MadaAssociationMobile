<?xml version="1.0" encoding="utf-8" ?>
<ResourceDictionary xmlns="http://xamarin.com/schemas/2014/forms"
            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
            xmlns:controls="clr-namespace:ConnectCareMobile.Controls"
            xmlns:effects="clr-namespace:ConnectCareMobile.Effects"
            x:Class="ConnectCareMobile.Resources.PagesTemplates">
    <ControlTemplate x:Key="BasePagesTemplates">
        <AbsoluteLayout
            VerticalOptions="FillAndExpand"
            HorizontalOptions="FillAndExpand">
            <Grid 
                AbsoluteLayout.LayoutBounds="0,0,1,1" 
                AbsoluteLayout.LayoutFlags="All"
                RowDefinitions="Auto,*,Auto">
                <Grid Padding="15" BackgroundColor="{TemplateBinding Parent.BindingContext.NavBarBackGroundColor}"
                    ColumnDefinitions="Auto,*,Auto" 
                    RowDefinitions="25"
                    IsVisible="{TemplateBinding Parent.BindingContext.HasNavBar}">
                    <!-- default NavBar header -->
                    <Grid ColumnSpacing="10" VerticalOptions="CenterAndExpand" ColumnDefinitions="Auto,Auto">
                        <ImageButton Source="BackArrow" 
                                     BackgroundColor="Transparent"
                                     VerticalOptions="CenterAndExpand"
                                     Command="{TemplateBinding Parent.BindingContext.BackButtonCommand}" 
                                     Grid.Column="0" 
                                     IsVisible="{TemplateBinding Parent.BindingContext.HasBackButton}" />
                        <Grid VerticalOptions="CenterAndExpand"
                            RowSpacing="0"
                            IsVisible="{TemplateBinding Parent.BindingContext.IsProfileView}"
                            ColumnDefinitions="32,Auto"
                            RowDefinitions="32"
                            Grid.Column="1">
                            <Frame 
                                HasShadow="False"
                                Padding="0"
                                CornerRadius="16">
                                <Image Aspect="AspectFit" Source="no_image"/>
                            </Frame>
                            <Grid 
                                RowSpacing="0"
                                VerticalOptions="CenterAndExpand"
                                RowDefinitions="Auto,Auto"
                                Grid.Column="1">
                                <Label FontSize="14"
                                       IsVisible="{TemplateBinding Parent.BindingContext.ChatReceiverName, Converter={StaticResource EmptyStringConverter}}"
                                       FontAttributes="Bold" 
                                       Text="{TemplateBinding Parent.BindingContext.ChatReceiverName}"/>
                                <Label FontSize="10" 
                                       IsVisible="{TemplateBinding Parent.BindingContext.ChatReceiverStatus, Converter={StaticResource EmptyStringConverter}}"
                                       Grid.Row="1" 
                                       Text="{TemplateBinding Parent.BindingContext.ChatReceiverStatus}"/>
                            </Grid>
                        </Grid>
                        <Label VerticalOptions="CenterAndExpand"
                            IsVisible="{TemplateBinding Parent.BindingContext.PageTitle}"
                            Style="{StaticResource ToolbarHeaderText}"
                            Grid.Column="1" 
                            Text="{TemplateBinding Parent.BindingContext.PageTitle}" />
                    </Grid>
                    <Grid
                        VerticalOptions="CenterAndExpand"
                        HorizontalOptions="End"
                        ColumnSpacing="10"
                        ColumnDefinitions="Auto,Auto,Auto"
                        Grid.Column="1" >
                        <!-- VideoCall Button -->
                        <ImageButton 
                            Padding="5,0"
                            Grid.Column="0"
                            Source="video_call_icon.png"
                            BackgroundColor="Transparent"
                            Command="{TemplateBinding Parent.BindingContext.VideoCallButtonCommand}"
                            IsVisible="{TemplateBinding Parent.BindingContext.HasNavBarVideoCallButton}"/>
                        <!-- VoiceCall Button -->
                        <ImageButton 
                            Grid.Column="1"
                            BackgroundColor="Transparent"
                            Padding="5,0"
                            Source="call_icon.png"
                            Command="{TemplateBinding Parent.BindingContext.VoiceCallButtonCommand}"
                            IsVisible="{TemplateBinding Parent.BindingContext.HasNavBarVoiceCallButton}" />
                        <!-- Option Button -->
                        <ImageButton 
                            Padding="10,0"
                            Grid.Column="2"
                            Source="OptionsIcon.png"
                            BackgroundColor="Transparent"
                            Command="{TemplateBinding Parent.BindingContext.OptionsButtonCommand}"
                            IsVisible="{TemplateBinding Parent.BindingContext.HasNavBarOptionButton}"/>
                        <!-- Add Friend Button -->
                        <ImageButton 
                            Padding="5,0"
                            Grid.Column="2"
                            Source="add_friend.png"
                            BackgroundColor="Transparent"
                            Command="{TemplateBinding Parent.BindingContext.AddFriendButtonCommand}"
                            IsVisible="{TemplateBinding Parent.BindingContext.HasNavBarAddFriendButton}"/>
                    </Grid>
                </Grid>
                <Grid 
                    Grid.Row="1"
                    Padding="20,0">
                    <ContentPresenter />
                </Grid>
            </Grid>
            <!--Action Sheet-->
            <StackLayout 
            BackgroundColor="Transparent"
            VerticalOptions="FillAndExpand"
            IsVisible="{TemplateBinding Parent.BindingContext.IsActionSheetActive}"
            HorizontalOptions="FillAndExpand"
            AbsoluteLayout.LayoutBounds="0,0,1,1"
            AbsoluteLayout.LayoutFlags="All">
                <Grid 
                VerticalOptions="FillAndExpand"
                HorizontalOptions="FillAndExpand">
                    <Frame 
                    HasShadow="False"
                    CornerRadius="0"
                    BorderColor="Black"
                    Opacity="0.5" 
                    BackgroundColor="Black">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Command="{TemplateBinding Parent.BindingContext.HideActionSheetCommand}"/>
                        </Frame.GestureRecognizers>
                    </Frame>
                    <controls:CustomFrame 
                        CornerRadius="28,28,0,0"
                        Padding="16,0,0,16"
                        VerticalOptions="EndAndExpand"
                        HorizontalOptions="FillAndExpand"
                        HasShadow="False"
                        Background="White"
                        BorderColor="Transparent">
                        <Grid RowSpacing="0" ColumnDefinitions="*" RowDefinitions="Auto,1,Auto">
                            <Grid ColumnDefinitions="Auto,*" RowDefinitions="14,Auto,Auto">
                                <Grid 
                                    Padding="0,10,0,0"
                                    Grid.ColumnSpan="2"
                                    RowDefinitions="4"
                                    ColumnDefinitions="*,32,*">
                                    <BoxView 
                                        Grid.Column="1"
                                        Grid.Row="0" 
                                        CornerRadius="8" 
                                        HeightRequest="4" 
                                        BackgroundColor="#999" />
                                </Grid>
                                <Label 
                                        Grid.Row="1"
                                        Text="Language" 
                                        Grid.ColumnSpan="2" 
                                        HorizontalOptions="CenterAndExpand" 
                                        TextColor="Black"/>
                                <ImageButton 
                                    BackgroundColor="Transparent" 
                                    Grid.Row="1"
                                    Padding="5"
                                    Margin="0" 
                                    Command="{TemplateBinding Parent.BindingContext.HideActionSheetCommand}"
                                    Source="close_icon"/>
                                <BoxView 
                                    Grid.Row="2" 
                                    Grid.ColumnSpan="2" 
                                    HeightRequest="1" 
                                    BackgroundColor="{StaticResource LightGrey}" />
                            </Grid>
                            <StackLayout Grid.Row="2">
                                <controls:CustomRadioButton Style="{StaticResource LanguageRadioButtons}" HighLightColor="#2965FF" TextColor="Black" Content="Arabic" GroupName="language"/>
                                <controls:CustomRadioButton Style="{StaticResource LanguageRadioButtons}" HighLightColor="#2965FF" TextColor="Black" Content="English" GroupName="language"/>
                            </StackLayout>
                        </Grid>
                    </controls:CustomFrame>
                </Grid>
            </StackLayout>
            <!--Inflator Menu-->
            <StackLayout 
            BackgroundColor="Transparent"
            VerticalOptions="FillAndExpand"
            IsVisible="{TemplateBinding Parent.BindingContext.IsInflatorMenuActive}"
            HorizontalOptions="FillAndExpand"
            AbsoluteLayout.LayoutBounds="0,0,1,1"
            AbsoluteLayout.LayoutFlags="All">
                <Grid 
                VerticalOptions="FillAndExpand"
                HorizontalOptions="FillAndExpand">
                    <StackLayout 
                    Opacity="0.5"
                    BackgroundColor="Transparent">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Command="{TemplateBinding Parent.BindingContext.HideInflatorMenuCommand}"/>
                        </StackLayout.GestureRecognizers>
                    </StackLayout>
                    <Frame 
                        CornerRadius="8"
                        BackgroundColor="#F0F0F0"
                        Padding="0"
                        Margin="0,10,40,0"
                        BorderColor="#F0F0F0"
                        VerticalOptions="StartAndExpand"
                        HorizontalOptions="EndAndExpand">
                        <StackLayout 
                            BindableLayout.ItemsSource="{TemplateBinding Parent.BindingContext.MenuItems}"
                            Padding="10,10" Spacing="10" BackgroundColor="#F0F0F0">
                            <BindableLayout.ItemTemplate>
                                <DataTemplate>
                                    <Label Padding="10,5" Text="{Binding Text}" Style="{StaticResource MenuItemText}" TextColor="#000">
                                        <Label.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding Command}" />
                                        </Label.GestureRecognizers>
                                    </Label>
                                </DataTemplate>
                            </BindableLayout.ItemTemplate>
                        </StackLayout>
                    </Frame>

                </Grid>
            </StackLayout>
            <!--Pop Up-->
            <StackLayout 
            BackgroundColor="Transparent"
            VerticalOptions="FillAndExpand"
            IsVisible="{TemplateBinding Parent.BindingContext.IsPopUpActive}"
            HorizontalOptions="FillAndExpand"
            AbsoluteLayout.LayoutBounds="0,0,1,1"
            AbsoluteLayout.LayoutFlags="All">
                <Grid 
                VerticalOptions="FillAndExpand"
                HorizontalOptions="FillAndExpand">
                    <StackLayout
                    Opacity="0.5" 
                    BackgroundColor="Black">
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Command="{TemplateBinding Parent.BindingContext.ClosePopUpCommand}"></TapGestureRecognizer>
                        </StackLayout.GestureRecognizers>
                    </StackLayout>
                    <Frame 
                        Margin="30"
                        CornerRadius="8"
                        Padding="0,0,0,16"
                        VerticalOptions="CenterAndExpand"
                        HorizontalOptions="CenterAndExpand"
                        HasShadow="False"
                        Background="White"
                        BorderColor="Transparent">
                        <Grid Padding="10,10,10,0" RowSpacing="0" ColumnDefinitions="*" RowDefinitions="Auto,Auto">
                            <Grid Padding="0,0,0,15" ColumnDefinitions="Auto" RowDefinitions="Auto">
                                <Label 
                                    Padding="10,0,0,0"
                                    Style="{DynamicResource PopupHeader}"
                                    Text="Add Contact" 
                                    Grid.Column="1" />
                                <ImageButton 
                                    Command="{TemplateBinding Parent.BindingContext.ClosePopUpCommand}"
                                    BackgroundColor="Transparent" 
                                    Padding="0"
                                    Margin="0"
                                    Source="close_icon"/>
                            </Grid>
                            <StackLayout Grid.Row="1">
                                <controls:CustomTextEntry
                                    Grid.Row="1"
                                    Text="{TemplateBinding Parent.BindingContext.ContactUsername.Text}"
                                    Placeholder="{TemplateBinding Parent.BindingContext.ContactUsername.Placeholder}"
                                    IsError="{TemplateBinding Parent.BindingContext.ContactUsername.IsError}"
                                    Title="{TemplateBinding Parent.BindingContext.ContactUsername.Title}"
                                    IsPassword="{TemplateBinding Parent.BindingContext.ContactUsername.IsPassword}"
                                    ErrorText="{TemplateBinding Parent.BindingContext.ContactUsername.ErrorText}"/>
                                <Grid ColumnDefinitions="*,Auto">
                                    <Button Text="Add" Style="{DynamicResource PrimaryButton}" Command="{TemplateBinding Parent.BindingContext.SubmitPopupCommand}"/>
                                    <Image Grid.Column="1" IsVisible="{TemplateBinding Parent.BindingContext.RequestSent}" Source="tick_icon"/>
                                </Grid>
                            </StackLayout>
                        </Grid>
                    </Frame>
                </Grid>
            </StackLayout>
            <!--Loading Indicator-->
            <StackLayout 
                BackgroundColor="Black"
                VerticalOptions="FillAndExpand"
                IsVisible="{TemplateBinding Parent.BindingContext.IsLoading}"
                HorizontalOptions="FillAndExpand"
                Opacity="0.5" 
                AbsoluteLayout.LayoutBounds="0,0,1,1"
                AbsoluteLayout.LayoutFlags="All">
                <Grid
                    RowDefinitions="Auto,Auto"
                    VerticalOptions="CenterAndExpand"
                    HorizontalOptions="CenterAndExpand">
                    <ActivityIndicator Grid.Row="0"
                        HorizontalOptions="CenterAndExpand"
                        Color="White" IsRunning="true"/>
                    <Label 
                        Grid.Row="1"
                        HorizontalOptions="CenterAndExpand"
                        TextColor="White"
                        Text="{TemplateBinding Parent.BindingContext.LoadingText}"/>
                </Grid>
            </StackLayout>
        </AbsoluteLayout>
    </ControlTemplate>
</ResourceDictionary>